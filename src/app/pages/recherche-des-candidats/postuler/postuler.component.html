<div class="container-postuler">
  <app-header/>
  <div class="form-postuler">
    <!-- ######### Formulaire pour postuler ######### -->
    <div class="form-section" *ngIf="showDone" style="display: flex;">
      <form>
        <p class="subtitle-1">Informations personnelles</p>
        <!-- Nom -->
        <div class="form-group">
          <label for="nom">Nom *</label>
          <input
            type="text"
            class="form-control input_"
            id="nom"
            placeholder="Nom"
            [(ngModel)]="candidat.nom"
            name="nom"
            required
          />
        </div>

        <!-- Prénom -->
        <div class="form-group">
          <label for="prenom">Prénom *</label>
          <input
            type="text"
            class="form-control"
            id="prenom"
            placeholder="Prénom"
            [(ngModel)]="candidat.prenom"
            name="prenom"
            required
          />
        </div>

        <!-- Email -->
        <div class="form-group">
          <label for="email_pro">Email *</label>
          <input
            type="email"
            class="form-control"
            id="email_pro"
            placeholder="Email"
            [(ngModel)]="candidat.email_pro"
            name="email_pro"
            required
          />
        </div>

        <!-- Téléphone -->
        <div class="form-group">
          <label for="tel">Numéro téléphone *</label>
          <input
            type="tel"
            class="form-control"
            id="tel"
            placeholder="Téléphone"
            [(ngModel)]="candidat.tel"
            name="tel"
            required
          />
        </div>

        <!-- Disponibilités -->
        <div class="form-group">
          <label for="disponibilites">Disponibilités</label>
          <div class="radioDispo">
            <mat-checkbox
              *ngFor="let jour of joursDisponibilite"
              [checked]="candidat.disponibilite?.includes(jour)"
              (change)="toggleDisponibilite(jour, $event.checked)">
              {{ jour }}
            </mat-checkbox>
          </div>
        </div>

        <!-- Créneaux disponibles -->
        <div class="form-group">
          <label for="crenaux" class="crenaux">Créneaux disponibles pour un entretien potentiel</label>
          <div class="days" *ngFor="let jour of jours">
            <div class="blocCreneaux">
              <span>{{ jour.nom }}</span>
              <div class="grid-items" *ngFor="let cren of jour.creneaux">
                <p
                  class="items"
                  (click)="toggleClass(jour, cren)"
                  [ngClass]="{
                  'highlighted-creneaux': cren.isHighlighted,
                  'default-creneaux': !cren.isHighlighted
                }"
                >
                  {{ cren.heure }}
                </p>
              </div>
            </div>
            <div class="separator"></div>
          </div>
        </div>

        <!-- CV -->
        <div class="form-group">
          <label for="cv">CV *</label>
          <input
            type="file"
            class="form-control cv"
            id="cv"
            placeholder="CV"
            [(ngModel)]="candidat.cv"
            name="cv"
            required
          />
        </div>

        <!-- Message -->
        <div class="form-group">
          <label for="lettre_motivation">Message (facultatif)</label>
          <textarea
            class="form-control"
            id="lettre_motivation"
            rows="3"
            placeholder="Décrivez votre motivation"
            [(ngModel)]="candidat.lettre_motivation"
            name="lettre_motivation"
          ></textarea>
        </div>

        <!-- Conditions Générales -->
        <div class="form-check mt-5">
          <input
            class="form-check-input"
            type="checkbox"
            id="conditionsGenerales"
            required
          />
          <label class="form-check-label" for="conditionsGenerales">
            En soumettant cette candidature, j'accepte d'avoir lu la Politique de confidentialité et confirme que jobFiksi stocke mes informations personnelles pour pouvoir traiter ma candidature à un emploi.
          </label>
        </div>

        <div class="form-check">
          <input class="form-check-input" type="checkbox" id="contactOpportunites" />
          <label class="form-check-label" for="contactOpportunites">
            Oui, l’entreprise peut me contacter directement au sujet de futures opportunités d'emploi spécifiques.
          </label>
        </div>

        <!-- Bouton Postuler -->
        <div class="btn-postuler mt-4 mb-2">
          <button type="submit" class="btn btn-primary" (click)="envoyerCandidature()">Postuler</button>
        </div>
      </form>
    </div>

    <div class="container-done" *ngIf="!showDone" style="display: flex;">
      <div class="image-container">
        <img src="/assets/picture-postuler-done.jpg" alt="Description" />
      </div>
      <p>Votre candidature a bien été postulée.</p>
      <a mat-button routerLink="/rechercheDesCandidats">Retour à la page d'accueil</a>
    </div>
  </div>


</div>
